<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>MySql学习笔记 | LANDFILL</title><link rel="stylesheet" type="text/css" href="/paranoiddemon.github.io/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/paranoiddemon.github.io/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/paranoiddemon.github.io/favicon.ico"><link rel="apple-touch-icon" href="/paranoiddemon.github.io/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/paranoiddemon.github.io/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/paranoiddemon.github.io/atom.xml"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">MySql学习笔记</h1><a id="logo" href="/paranoiddemon.github.io/.">LANDFILL</a><p class="description">当代生活是垃圾</p></div><div id="nav-menu"><a class="current" href="/paranoiddemon.github.io/."><i class="fa fa-home"> 首页</i></a><a href="/paranoiddemon.github.io/about/"><i class="fa fa-user"> 关于</i></a><a href="/paranoiddemon.github.io/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/paranoiddemon.github.io/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">MySql学习笔记</h1><div class="post-meta">2020-06-09<span> | </span><span class="category"><a href="/paranoiddemon.github.io/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><a class="disqus-comment-count" href="/paranoiddemon.github.io/posts/mysql-select.html#vcomment"><span class="valine-comment-count" data-xid="/paranoiddemon.github.io/posts/mysql-select.html"></span><span> 条评论</span></a><div class="post-content"><p>B站随意找的视频教程：<a href="https://www.bilibili.com/video/BV12b411K7Zu?p=1" target="_blank" rel="noopener">MySQL 基础+高级篇- 数据库 -sql -尚硅谷</a><br>MySql8.0：<a href="https://zhuanlan.zhihu.com/p/37152572" target="_blank" rel="noopener">MySql安装</a><br>Navicat 15： <a href="https://www.ghpym.com/navicatpatchdoc.html" target="_blank" rel="noopener">Navicat注册机</a></p>
<p>DB/DBMS</p>
<p>Sql/MySql</p>
<table>
<thead>
<tr>
<th>分类</th>
<th>中文</th>
<th>语法</th>
</tr>
</thead>
<tbody><tr>
<td>DQL（Data Query Language）</td>
<td>数据查询语言</td>
<td>select</td>
</tr>
<tr>
<td>DML  (Data Manipulate Language)</td>
<td>数据操作语言</td>
<td>insert 、update、delete</td>
</tr>
<tr>
<td>DDL（Data Define Languge）</td>
<td>数据定义语言</td>
<td>create、drop、alter</td>
</tr>
<tr>
<td>TCL（Transaction Control Language）</td>
<td>事务控制语言</td>
<td>commit、rollback</td>
</tr>
</tbody></table>
<h1 id="DQL（Data-Query-Language）"><a href="#DQL（Data-Query-Language）" class="headerlink" title="DQL（Data Query Language）"></a>DQL（Data Query Language）</h1><h2 id="进阶1：基础查询"><a href="#进阶1：基础查询" class="headerlink" title="进阶1：基础查询"></a>进阶1：基础查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">SELECT 查询列表 FROM 表名；</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1.查询列表可以是：表中的字段、常量值、表达式、函数</span><br><span class="line">2.查询的结果是一个虚拟的表格</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line">#1. 查询单个字段</span><br><span class="line">SELECT email FROM employees;</span><br><span class="line"></span><br><span class="line">#2. 查询多个字段</span><br><span class="line">SELECT email, last_name FROM employees;</span><br><span class="line"></span><br><span class="line">#3. 查询全部字段</span><br><span class="line">SELECT * FROM employees;</span><br><span class="line"></span><br><span class="line">#4. 查询常量值</span><br><span class="line">SELECT 100;</span><br><span class="line">SELECT &#39;john&#39;;</span><br><span class="line"></span><br><span class="line">#5.查询表达式</span><br><span class="line">SELECT 100*98;</span><br><span class="line"></span><br><span class="line">#6.查询函数</span><br><span class="line">SELECT VERSION();</span><br><span class="line"></span><br><span class="line">#7.字段起别名</span><br><span class="line">&#x2F;*</span><br><span class="line">1.便于理解</span><br><span class="line">2.如果要查询的字段有重名，可以区分开</span><br><span class="line">*&#x2F;</span><br><span class="line">#方式一：使用as</span><br><span class="line">SELECT 100*98 AS 结果;</span><br><span class="line">SELECT last_name AS 姓,first_name AS 名 FROM employees;</span><br><span class="line"></span><br><span class="line">#方式二：使用空格</span><br><span class="line">SELECT last_name 姓,first_name 名 FROM employees;</span><br><span class="line"></span><br><span class="line">#案例：查询salary，显示结果为out put,含有关键词或者空格</span><br><span class="line">SELECT salary  AS &quot;out put&quot; FROM employees;</span><br><span class="line"></span><br><span class="line">#8.去重</span><br><span class="line"></span><br><span class="line">#案例：查询员工表中中涉及到的所有的部门编号</span><br><span class="line">SELECT DISTINCT department_id FROM employees;</span><br><span class="line"></span><br><span class="line">#9.+号的作用</span><br><span class="line">&#x2F;*</span><br><span class="line">mysql中的+号：</span><br><span class="line">仅仅只有一个功能：运算符</span><br><span class="line"></span><br><span class="line">1.两个操作数都为数值型，则做加法运算</span><br><span class="line">  SELECT 100+90; </span><br><span class="line"></span><br><span class="line">2.其中一方为字符型，试图将字符型数值转换成数值型</span><br><span class="line">- SELECT &#39;123&#39;+90;   如果转换成功，则继续做加法运算</span><br><span class="line">- SELECT &#39;John&#39;+90;  如果转换失败，则将字符型数值转换成0</span><br><span class="line">- SELECT null +10;   只要其中一方为null，则结果肯定为null；</span><br><span class="line">*&#x2F;</span><br><span class="line"># 查询员工们和姓连接过程一个字段</span><br><span class="line">SELECT last_name+first_name AS 姓名 FROM employees;</span><br><span class="line">SELECT CONCAT(last_name,&#39; &#39;, first_name) AS 姓名 FROM employees;</span><br><span class="line"></span><br><span class="line">#显示表的结构，并查询全部数据</span><br><span class="line">DESC departments;</span><br><span class="line">SELECT * FROM departments;</span><br><span class="line"></span><br><span class="line">#显示出employees的全部列，各个列之间用逗号连接，列头为output</span><br><span class="line">SELECT </span><br><span class="line">IFNULL(commission_pct,0) AS 奖金率,commission_pct</span><br><span class="line">FROM</span><br><span class="line">employees;</span><br><span class="line">#----------------------------------------------------</span><br><span class="line">SELECT </span><br><span class="line">CONCAT(first_name,&#39; &#39;,last_name,&#39;,&#39;,IFNULL(commission_pct,0)) AS output</span><br><span class="line">FROM</span><br><span class="line">employees;</span><br></pre></td></tr></table></figure>
<h2 id="进阶2：条件查询"><a href="#进阶2：条件查询" class="headerlink" title="进阶2：条件查询"></a>进阶2：条件查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">语法：</span><br><span class="line">SELECT 查询列表</span><br><span class="line">FROM 表名 </span><br><span class="line">WHERE 筛选条件；</span><br><span class="line"></span><br><span class="line">分类：</span><br><span class="line">1. 按条件表达式筛选</span><br><span class="line">条件运算符：&gt; &lt; &#x3D; !&#x3D; or &lt;&gt; &gt;&#x3D; &lt;&#x3D;</span><br><span class="line"></span><br><span class="line">2.按逻辑表达式筛选</span><br><span class="line">逻辑运算符：用于连接条件表达式</span><br><span class="line">							&amp;&amp; || ！</span><br><span class="line">						and or not</span><br><span class="line">	and: 两个条件都为true</span><br><span class="line">	or: 一个条件为true，则为true</span><br><span class="line">	not：相反</span><br><span class="line">	</span><br><span class="line">3.模糊查询</span><br><span class="line">like</span><br><span class="line">between and</span><br><span class="line">in</span><br><span class="line">is null</span><br><span class="line">*&#x2F;</span><br><span class="line">#1.按条件表达式筛选</span><br><span class="line">#案例1：查询工资&gt;12000的员工信息</span><br><span class="line">SELECT</span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">salary&gt;12000;</span><br><span class="line">#案例2：查询部门编号不等于90的员工名和部门编号</span><br><span class="line">SELECT</span><br><span class="line">last_name, department_id</span><br><span class="line">FROM </span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">department_id!&#x3D;90 ;</span><br><span class="line"></span><br><span class="line">#2.按逻辑表达式筛选</span><br><span class="line"></span><br><span class="line">#案例1：查询工资在10000-20000的员工名、工资、及奖金</span><br><span class="line">SELECT </span><br><span class="line">CONCAT(first_name,&#39; &#39;,last_name) AS &#39;name&#39;,</span><br><span class="line">salary,</span><br><span class="line">IFNULL(commission_pct,0) AS comission</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">salary&gt;&#x3D;10000 AND salary&lt;&#x3D;20000;</span><br><span class="line"></span><br><span class="line">#案例2：查询部门编号不在90-110之间，或者工资高于15000的员工信息</span><br><span class="line">SELECT</span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">department_id&lt;90 OR department_id&gt;110 OR salary&gt;&#x3D;15000;</span><br><span class="line"></span><br><span class="line">#3.模糊查询</span><br><span class="line">&#x2F;*</span><br><span class="line">like </span><br><span class="line">特点：</span><br><span class="line">一般和通配符搭配使用</span><br><span class="line">					通配符：</span><br><span class="line">						% 任意多个字符，包含0个字符</span><br><span class="line">						_ 任意单个字符</span><br><span class="line">						\ 转义字符</span><br><span class="line">between and</span><br><span class="line">in</span><br><span class="line">is null</span><br><span class="line">is not null</span><br><span class="line">*&#x2F;</span><br><span class="line">#1.like</span><br><span class="line"></span><br><span class="line">#案例1：查询员工名中包含字符a的员工信息</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">last_name LIKE &#39;%a%&#39;;</span><br><span class="line"></span><br><span class="line">#案例2：查询员工名中第三个字符为n，第五个字符为l的员工名和工资</span><br><span class="line">SELECT</span><br><span class="line">last_name,salary</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">last_name like &#39;__n_l%&#39;;</span><br><span class="line"></span><br><span class="line">#案例3：查询员工名中第二个字符为_的员工信息</span><br><span class="line">SELECT</span><br><span class="line">last_name</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">last_name LIKE &#39;_a_%&#39; ESCAPE &#39;a&#39;;</span><br><span class="line"># 效果一样last_name LIKE &#39;_\_%&#39;;</span><br><span class="line"></span><br><span class="line">#2. between and </span><br><span class="line">#case 1: 查询员工编号在100-120的员工信息</span><br><span class="line">SELECT</span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">employee_id BETWEEN 100 AND 120; #包含临界值，不可以颠倒临界值顺序</span><br><span class="line"></span><br><span class="line">#3. in</span><br><span class="line">&#x2F;*</span><br><span class="line">判断某字段的值是否属于in列表中的某一项</span><br><span class="line">-提高简洁度</span><br><span class="line">-in列表的值类型必须一致或兼容</span><br><span class="line">-不支持通配符的使用</span><br><span class="line">*&#x2F;</span><br><span class="line"># case：查询员工的工种编号是IT_PROG、AD_VP、AD_PRES中的员工名和工种编号</span><br><span class="line">SELECT</span><br><span class="line">last_name,</span><br><span class="line">job_id</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE </span><br><span class="line">job_id &#x3D;&#39;IT_PROG&#39; OR job_id&#x3D;&#39;AD_VP&#39; OR job_id&#x3D;&#39;AD_PRES&#39;;</span><br><span class="line">#-------------------------------------------------------</span><br><span class="line">SELECT</span><br><span class="line">last_name,</span><br><span class="line">job_id</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE </span><br><span class="line">job_id IN(&#39;IT_PROG&#39;,&#39;AD_VP&#39; ,&#39;AD_PRES&#39;);</span><br><span class="line"></span><br><span class="line">#4 is null&#x2F; is not null</span><br><span class="line">&#x2F;*</span><br><span class="line">&#x3D; &lt;&gt;不能判断null值，is&#x2F; is not 才可以判断null值</span><br><span class="line">*&#x2F;</span><br><span class="line"># case1:查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT</span><br><span class="line">last_name,</span><br><span class="line">commission_pct</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">commission_pct is NULL;	</span><br><span class="line"></span><br><span class="line">#安全等于&lt;&#x3D;&gt; 判断null值和普通数值</span><br><span class="line"># case1:查询没有奖金的员工名和奖金率</span><br><span class="line">SELECT</span><br><span class="line">last_name,</span><br><span class="line">commission_pct</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">commission_pct &lt;&#x3D;&gt; NULL;	</span><br><span class="line"></span><br><span class="line">#case2:查询工资为12000的员工信息</span><br><span class="line">SELECT</span><br><span class="line">last_name,</span><br><span class="line">salary</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">salary &lt;&#x3D;&gt; 12000;	</span><br><span class="line"></span><br><span class="line">#查询员工号为176的姓名和部门号和年薪</span><br><span class="line">SELECT</span><br><span class="line">last_name,</span><br><span class="line">department_id,</span><br><span class="line">salary*12*(1+IFNULL(commission_pct,0)) AS &#39;annual salary&#39;</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">employee_id&#x3D;176;</span><br><span class="line"></span><br><span class="line">#测试题</span><br><span class="line">#1.查询没有奖金，且工资小于18000的salary,last_name</span><br><span class="line">SELECT</span><br><span class="line">salary,</span><br><span class="line">last_name</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">commission_pct is NULL </span><br><span class="line">AND salary&lt;18000;</span><br><span class="line"></span><br><span class="line">#2.查询employees表中，job_id不为‘IT’或者工资为12000的员工信息</span><br><span class="line">SELECT</span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">job_id &lt;&gt;&#39;IT&#39; OR salary&#x3D;12000;</span><br><span class="line"></span><br><span class="line">#3.查询departments的结构</span><br><span class="line">DESC departments;</span><br><span class="line"></span><br><span class="line">#4.查询departments表中涉及到了哪些位置编号</span><br><span class="line">SELECT DISTINCT</span><br><span class="line">location_id</span><br><span class="line">FROM</span><br><span class="line">departments;</span><br><span class="line"></span><br><span class="line">&#x2F;*5.SELECT * FROM employees 和</span><br><span class="line">SELECT * FROM employees WHERE commission_pct like&#39;%%&#39; AND last name like &#39;%%&#39;</span><br><span class="line">结果是否一样，原因</span><br><span class="line">不一样，值存在null的情况</span><br><span class="line">*&#x2F;</span><br></pre></td></tr></table></figure>
<h2 id="进阶3：排序查询"><a href="#进阶3：排序查询" class="headerlink" title="进阶3：排序查询"></a>进阶3：排序查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">SELECT * from employees;</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line">SELECT 列表</span><br><span class="line">FROM 表</span><br><span class="line">WHERE 筛选条件</span><br><span class="line">ORDER BY 排序列表 DESC&#x2F;ASC</span><br><span class="line"> 1.ORDER BY子句支持单个字段、多个字段、表达式、函数、别名</span><br><span class="line"> 2.ORDER BY子句一般是放在查询语句的最后面，limit子句除外</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#case 1：查询员工信息，要求工资从高到低排序</span><br><span class="line">SELECT</span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">ORDER BY</span><br><span class="line">salary</span><br><span class="line">DESC;</span><br><span class="line"></span><br><span class="line">#------------------------------升序是默认的，可以不用写出</span><br><span class="line">SELECT</span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">ORDER BY</span><br><span class="line">salary</span><br><span class="line">ASC;</span><br><span class="line"></span><br><span class="line">#case 2：查询部门编号&gt;&#x3D;90的员工信息，按入职时间的先后（筛选条件）</span><br><span class="line">SELECT</span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">department_id&gt;&#x3D;90</span><br><span class="line">ORDER BY</span><br><span class="line">hiredate;</span><br><span class="line"></span><br><span class="line">#case 3：按年薪的高低显示员工信息（按表达式排序）</span><br><span class="line">SELECT</span><br><span class="line">*,salary*12*(1+IFNULL(commission_pct,0)) &#39;annual salary&#39; </span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">ORDER BY</span><br><span class="line">salary*12*(1+IFNULL(commission_pct,0)) DESC;</span><br><span class="line"></span><br><span class="line">#case 4:按年薪的高低显示员工信息（按别名排序）</span><br><span class="line">SELECT</span><br><span class="line">*,salary*12*(1+IFNULL(commission_pct,0)) &#39;annual salary&#39; </span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">ORDER BY</span><br><span class="line">&#39;annual salary&#39; DESC;</span><br><span class="line"></span><br><span class="line">#case 5:按姓名的长度显示员工的姓名和工资（按函数）</span><br><span class="line">SELECT </span><br><span class="line">LENGTH(last_name),last_name,salary</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">ORDER BY LENGTH(last_name) DESC;</span><br><span class="line"></span><br><span class="line">#case 6:查询员工信息，先按工资排序，再按员工编号排序(按多个字段排序）</span><br><span class="line">SELECT</span><br><span class="line">*</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">ORDER BY salary ASC,employee_id DESC;</span><br><span class="line"></span><br><span class="line">#1.查询员工的姓名、部门号、年薪，按年薪降序，按姓名升序</span><br><span class="line">SELECT</span><br><span class="line">last_name,</span><br><span class="line">department_id,</span><br><span class="line">salary*12*(1+IFNULL(commission_pct,0)) &#39;annual salary&#39;</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">ORDER BY</span><br><span class="line">&#39;annual salary&#39; DESC,last_name;</span><br><span class="line"></span><br><span class="line">#2.选择工资不在8000-17000的员工的姓名和工资，按工资降序</span><br><span class="line">SELECT</span><br><span class="line">last_name,salary</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">#salary&lt;8000 OR salary&gt;17000</span><br><span class="line">#NOT (salary BETWEEN 8000 AND 17000) </span><br><span class="line">salary NOT BETWEEN 8000 AND 17000</span><br><span class="line">ORDER BY</span><br><span class="line">salary DESC;</span><br><span class="line"></span><br><span class="line">#3.查询邮箱中包含e的员工信息，按邮箱字节数降序，按部门号升序</span><br><span class="line">SELECT </span><br><span class="line">*,LENGTH(email)</span><br><span class="line">FROM</span><br><span class="line">employees</span><br><span class="line">WHERE</span><br><span class="line">email like &#39;%e%&#39;</span><br><span class="line">ORDER BY</span><br><span class="line">LENGTH(email) DESC,department_id;</span><br></pre></td></tr></table></figure>

<h2 id="进阶4：常见函数"><a href="#进阶4：常见函数" class="headerlink" title="进阶4：常见函数"></a>进阶4：常见函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">概念：一组逻辑语句封装在方法体重，对外暴露方法名</span><br><span class="line">1.隐藏了实现细节</span><br><span class="line">2.提高代码的重用性</span><br><span class="line">调用：SELECT 函数名(实参列表) [from 表]；如果调用了表内的字段</span><br><span class="line">特点：1.函数名 2.函数功能</span><br><span class="line">函数可以自定义</span><br><span class="line">分类：</span><br><span class="line">			1.单行函数：CONCAT、LENGTH，IFNULL等，做处理使用</span><br><span class="line">			2.分组函数：做统计使用，传一组值，返回一个值，又称为统计函数、聚合函数、组函数</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#1. 单行函数</span><br><span class="line">&#x2F;*</span><br><span class="line">	字符函数 concat substr instr length lpad rpad upper lower trim replace</span><br><span class="line">	数学函数  ceil floor truncate mod round</span><br><span class="line">	日期函数 now curdate curtime year month day hour minute second  str_to_date date_format monthname</span><br><span class="line">	其他函数 version datebase user</span><br><span class="line">	流程控制函数 if case的两种用法</span><br><span class="line">*&#x2F;</span><br><span class="line">			</span><br><span class="line">#一、字符函数</span><br><span class="line"></span><br><span class="line">#1.length 获取参数值的字节个数</span><br><span class="line">SELECT LENGTH(&#39;john&#39;);</span><br><span class="line">SELECT LENGTH(&#39;啊&#39;); #utf8字符集，汉字占3个字节</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES LIKE &#39;%char%&#39; #展示字符集</span><br><span class="line"></span><br><span class="line">#2.concat 拼接字符串</span><br><span class="line">SELECT CONCAT(last_name,&#39;_&#39;,first_name) &#39;name&#39;</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#3.upper、lower 改变大小写</span><br><span class="line">SELECT UPPER(&#39;john&#39;);</span><br><span class="line">SELECT LOWER(&#39;jOHN&#39;);</span><br><span class="line"># e.g. 将姓大写，名小写,然后拼接</span><br><span class="line">SELECT</span><br><span class="line">CONCAT(UPPER(last_name),&#39; &#39;,LOWER(first_name)) &#39;NAME&#39; #函数可以嵌套</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#4.substr、substring 截取字符串</span><br><span class="line">SELECT SUBSTR(&#39;annihilation&#39;,3);   #索引都是从1开始的， nihilation</span><br><span class="line">SELECT SUBSTR(&#39;annihilation&#39;,1,3); #ann 索引，长度</span><br><span class="line"></span><br><span class="line">#case: 姓名中首字符大写，其他小写后用_拼接</span><br><span class="line">SELECT </span><br><span class="line">CONCAT(UPPER(SUBSTR(last_name,1,1)),&#39;_&#39;,LOWER(SUBSTR(last_name,2)))</span><br><span class="line">FROM</span><br><span class="line">employees;</span><br><span class="line"></span><br><span class="line">#5.instr 返回子串在字符串中的第一次出现的起始索引</span><br><span class="line">SELECT INSTR(&#39;annihilation&#39;,&#39;nihilation&#39;);</span><br><span class="line"></span><br><span class="line">#6.trim  去除两端的字符</span><br><span class="line">SELECT LENGTH(TRIM(&#39;  annihilation  &#39;));</span><br><span class="line">SELECT TRIM(&#39;a&#39; FROM &#39;aannihilationa&#39;); #输出nnihilation</span><br><span class="line"></span><br><span class="line">#7.lpad 用指定字符左填充指定长度</span><br><span class="line">SELECT LPAD(&#39;annihilation&#39;,20,&#39;-&#39;) AS output; #--------annihilation</span><br><span class="line">SELECT LPAD(&#39;annihilation&#39;,2,&#39;-&#39;) AS output;  #an</span><br><span class="line"></span><br><span class="line">#8.rpad 用指定字符右填充指定长度</span><br><span class="line">SELECT RPAD(&#39;annihilation&#39;,20,&#39;-&#39;) AS output; #annihilation--------</span><br><span class="line"></span><br><span class="line">#9.replace 替换</span><br><span class="line">SELECT REPLACE(&#39;abc&#39;,&#39;a&#39;,&#39;z&#39;);</span><br><span class="line"></span><br><span class="line">#二、数学函数</span><br><span class="line"></span><br><span class="line">#round 四舍五入</span><br><span class="line">SELECT ROUND(1.65);  #2</span><br><span class="line">SELECT ROUND(1.45);  #1</span><br><span class="line">SELECT ROUND(-1.65); #-2</span><br><span class="line">SELECT ROUND(1.657,2); #1.66 保留2位</span><br><span class="line"></span><br><span class="line">#ceil 向上取整，返回&gt;&#x3D;该参数的最小整数</span><br><span class="line">SELECT CEIL(1.52);  #2</span><br><span class="line">SELECT CEIL(1.00);  #1 </span><br><span class="line">SELECT CEIL(-1.02); #-1 </span><br><span class="line"></span><br><span class="line">#floor 向下取证，返回&lt;&#x3D;该参数的最大整数</span><br><span class="line">SELECT FLOOR(9.8)   #9</span><br><span class="line">SELECT FLOOR(-9.8)  #-10</span><br><span class="line"></span><br><span class="line">#truncate 截断</span><br><span class="line">SELECT TRUNCATE(1.699,1)  #1.6</span><br><span class="line"></span><br><span class="line">#mod 取余</span><br><span class="line">&#x2F;*</span><br><span class="line">mod(a,b): a-a&#x2F;b*b  (其中a&#x2F;b是取整数）</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT MOD(10,3); #1</span><br><span class="line">SELECT 10%3;</span><br><span class="line">SELECT MOD(-10,3); #-1  根据被除数的正负，取正负</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#三、日期函数</span><br><span class="line"></span><br><span class="line">#now 返回当前系统日期及时间 2020-06-10 17:10:22</span><br><span class="line">SELECT NOW();</span><br><span class="line"></span><br><span class="line">#curdate 返回当前系统日期   2020-06-10</span><br><span class="line">SELECT CURDATE(); </span><br><span class="line"></span><br><span class="line">#curtime 返回当前时间   17:12:15</span><br><span class="line">SELECT CURTIME();</span><br><span class="line"></span><br><span class="line">#获取指定的部分：年月日、时分秒</span><br><span class="line">SELECT YEAR(NOW());</span><br><span class="line">SELECT YEAR(&#39;1900-1-1&#39;);</span><br><span class="line">SELECT YEAR(hiredate) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT MONTH(NOW());     # 6</span><br><span class="line">SELECT MONTHNAME(NOW()); # June</span><br><span class="line"></span><br><span class="line">#DAY(date),HOUR(time),MINUTE(time),SECOND(time)</span><br><span class="line"></span><br><span class="line">#STR_TO_DATE(str,format) 将字符串转换成指定格式的日期</span><br><span class="line">&#x2F;*格式符</span><br><span class="line">%Y  20xx</span><br><span class="line">%y  xx</span><br><span class="line">%m  01,02...12</span><br><span class="line">%c  1,2...12</span><br><span class="line">%d  01,02...31</span><br><span class="line">%H  01,02...24</span><br><span class="line">%h  01,02...12</span><br><span class="line">%i  00,01...59</span><br><span class="line">%s  00,01...69</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT STR_TO_DATE(&#39;1900-01-01&#39;,&#39;%Y-%m-%d&#39;);</span><br><span class="line"></span><br><span class="line">#case 查询入职日期1992-4-3的员工信息</span><br><span class="line">SELECT *FROM employees</span><br><span class="line">WHERE hiredate&#x3D; STR_TO_DATE(&#39;4-3 1992&#39;,&#39;%c-%d %Y&#39;);</span><br><span class="line"></span><br><span class="line">#DATE_FORMAT(date,format) 将日期转换成字符</span><br><span class="line">SELECT DATE_FORMAT(&#39;2008&#x2F;1&#x2F;1&#39;,&#39;%Y年%m月%d日&#39;);</span><br><span class="line"></span><br><span class="line">#四、其他函数</span><br><span class="line">SELECT VERSION();</span><br><span class="line">SELECT DATABASE();</span><br><span class="line">SELECT USER();</span><br><span class="line"></span><br><span class="line">#五、流程控制函数</span><br><span class="line">#1.if函数：if else的效果</span><br><span class="line">SELECT IF(10&gt;5,&#39;大&#39;,&#39;小&#39;) ; #expr1条件表达式，true返回expr2，false返回expr3</span><br><span class="line">SELECT last_name,commission_pct, IF(commission_pct is null,&#39;no&#39;,&#39;yes&#39;) # if前面要加逗号</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#2.case函数的使用一：switch case的效果</span><br><span class="line">&#x2F;*</span><br><span class="line">java中 </span><br><span class="line">switch(变量或表达式）&#123;</span><br><span class="line">       case 常量1：语句1；break；</span><br><span class="line">			 ...</span><br><span class="line">			 default:语句n;break;</span><br><span class="line">			 </span><br><span class="line">			 &#125;</span><br><span class="line">			 </span><br><span class="line">mysql中   判断等值</span><br><span class="line">  CASE 要判断的变量或表达式						</span><br><span class="line">	WHEN 常量1 THEN 要显示的值1或语句1； </span><br><span class="line">	WHEN 常量2 THEN 要显示的值2或语句2；</span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">	ELSE 要显示的值n或语句n；</span><br><span class="line">  END </span><br><span class="line">#如果是在select后面，case作为表达式，只能显示为值，而不能用语句</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;*案例：查询员工的工资，要求</span><br><span class="line">部门号&#x3D;30，显示的工资为1.1倍</span><br><span class="line">部门号&#x3D;40，显示的工资为1.2倍</span><br><span class="line">部门号&#x3D;50，显示的工资为1.3倍</span><br><span class="line">其他部门，显示为原工资</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT salary,department_id,</span><br><span class="line">  CASE department_id</span><br><span class="line">	WHEN  30 THEN salary*1.1   #是个值，不用加分号</span><br><span class="line">	WHEN  40 THEN salary*1.2 </span><br><span class="line">	WHEN  50 THEN salary*1.3</span><br><span class="line">	ELSE  salary</span><br><span class="line">  END AS &#39;new salary&#39;</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#3.case函数的使用二：类似于多重if</span><br><span class="line">&#x2F;*</span><br><span class="line">java中：</span><br><span class="line">if(条件1）｛</span><br><span class="line">				语句1；</span><br><span class="line">｝</span><br><span class="line">else if(条件2）｛</span><br><span class="line">				语句2；</span><br><span class="line">｝</span><br><span class="line">...</span><br><span class="line">else&#123;</span><br><span class="line">				语句n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysql中：</span><br><span class="line">case   														#后面没有变量或表达式，判断区间</span><br><span class="line">when 条件1 then 显示值1 或语句1；</span><br><span class="line">when 条件2 then 显示值2 或语句2；</span><br><span class="line">...</span><br><span class="line">else 显示值n或语句n；</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">&#x2F;*</span><br><span class="line">#案例：查询员工的工资情况</span><br><span class="line">如果工资&gt;20000，显示A</span><br><span class="line">如果工资&gt;15000，显示B</span><br><span class="line">如果工资&gt;10000，显示C</span><br><span class="line">否则D</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT salary,</span><br><span class="line">CASE</span><br><span class="line">WHEN salary&gt;20000 THEN &#39;A&#39;   #字符串一定要加单引号</span><br><span class="line">WHEN salary&gt;15000	THEN &#39;B&#39;</span><br><span class="line">WHEN salary&gt;10000 THEN &#39;C&#39;</span><br><span class="line">ELSE &#39;D&#39;</span><br><span class="line">END AS &#39;rank&#39;</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#练习</span><br><span class="line">#1.显示系统时间（时间+日期）</span><br><span class="line">SELECT NOW();</span><br><span class="line">#2.查询员工号、姓名、工资、以及工资提高20%后的结果</span><br><span class="line">SELECT employee_id,last_name,salary,salary*1.2 as &#39;new salary&#39;</span><br><span class="line">FROM employees</span><br><span class="line">#3.将员工的姓名按首字母排序，写出姓名长度</span><br><span class="line">SELECT last_name,length(last_name) as length,substr(last_name,1,1) as initial</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY initial;</span><br><span class="line">#区别于order by last_name 效果不一样，先首字母，后第二个字母。按initial排序，后面是随机的</span><br><span class="line"></span><br><span class="line">#4.做一个查询，产生下面结果</span><br><span class="line">&#x2F;*&lt;last_name&gt; earns &lt;salary&gt; monthly but wants &lt;salary*3&gt;</span><br><span class="line">Dream Salary</span><br><span class="line">K_ing earns 24000.00 monthly but wants 72000.00</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT CONCAT(last_name,&#39; earns &#39;,salary,&#39; monthly but wants &#39;, salary*3) as &#39;Dream Salary&#39;</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name&#x3D;&#39;K_ing&#39; and salary&#x3D;24000;</span><br><span class="line"></span><br><span class="line">#5. 使用case when，按照下面的条件</span><br><span class="line"> job     grade</span><br><span class="line">AD_PRES    A</span><br><span class="line">ST_MAN     B</span><br><span class="line">IT_PROG    C</span><br><span class="line"></span><br><span class="line">SELECT last_name,job_id job, </span><br><span class="line">CASE job_id</span><br><span class="line">WHEN &#39;AD_PRES&#39; THEN &#39;A&#39;  #字符串一定要加引号</span><br><span class="line">WHEN &#39;ST_MAN&#39;  THEN &#39;B&#39;</span><br><span class="line">WHEN &#39;IT_PROG&#39; THEN &#39;C&#39;</span><br><span class="line">END AS grade</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id&#x3D;&#39;AD_PRES&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#二、分组函数</span><br><span class="line">&#x2F;*</span><br><span class="line">功能：用作统计使用，又称聚合函数、统计函数、组函数</span><br><span class="line">分类</span><br><span class="line">sum</span><br><span class="line">avg</span><br><span class="line">max</span><br><span class="line">min</span><br><span class="line">count：计算非空的</span><br><span class="line"></span><br><span class="line">特点：</span><br><span class="line">1.忽略null</span><br><span class="line">2.和dinstinct搭配使用</span><br><span class="line">3.和分组函数一同查询的字段要求是group by后的字段</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#1.简单使用</span><br><span class="line">SELECT SUM(salary) FROM employees;</span><br><span class="line">SELECT AVG(salary) FROM employees;</span><br><span class="line">SELECT min(salary) FROM employees;</span><br><span class="line">SELECT MAX(salary) FROM employees;</span><br><span class="line">SELECT COUNT(salary) FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT SUM(salary) 和,ROUND(AVG(salary),2) 平均,min(salary),MAX(salary),COUNT(salary)</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#2.参数支持类型</span><br><span class="line">&#x2F;*</span><br><span class="line">sum avg：数值型</span><br><span class="line">max min count ：字符型也可以做参数</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#3.是否忽略null</span><br><span class="line">&#x2F;*</span><br><span class="line">null+任何数为null</span><br><span class="line">sum avg:忽略</span><br><span class="line">max min count ：忽略</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#4.搭配distinct  去重</span><br><span class="line">SELECT </span><br><span class="line">SUM(DISTINCT salary),  #中间没有逗号</span><br><span class="line">SUM(salary) </span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(DISTINCT salary) FROM employees;</span><br><span class="line"></span><br><span class="line">#5.count函数的详细介绍</span><br><span class="line">SELECT COUNT(*) FROM employees; #统计行数</span><br><span class="line">SELECT COUNT(1) FROM employees; #加了1列1，统计行数</span><br><span class="line">SELECT COUNT(2） FROM employees; </span><br><span class="line">SELECT COUNT(&#39;abc&#39;) FROM employees; #加了1列常量，统计行数</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line">效率：</span><br><span class="line">MYISAM存储引擎，count（*）效率高</span><br><span class="line">INNODB存储引擎，count（*）和count（1）相似，比count（字段）高</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#6.和分组函数一同查询的字段有限制</span><br><span class="line">SELECT AVG(salary),employee_id FROM employees; # employee_id的值无意义</span><br><span class="line"></span><br><span class="line">#查询最大入职时间和最小入职时间相差天数</span><br><span class="line">SELECT DATEDIFF(NOW(),&#39;1996-09-12&#39;) #前面减后面 8673</span><br><span class="line"></span><br><span class="line"># 查询部门编号为90的员工个数</span><br><span class="line">SELECT COUNT(department_id) #不能用count（department_id&#x3D;90）,结果和count(department_id)一样</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">SELECT COUNT(*)</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id&#x3D;90;</span><br></pre></td></tr></table></figure>

<h2 id="进阶5：分组查询"><a href="#进阶5：分组查询" class="headerlink" title="进阶5：分组查询"></a>进阶5：分组查询</h2><figure class="highlight plain"><figcaption><span>sql	</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#查询每个部门的平均工资</span><br><span class="line">&#x2F;*</span><br><span class="line">SELECT column(要出现在group by后面, group_function()</span><br><span class="line">FROM table</span><br><span class="line">[WHERE 筛选条件]</span><br><span class="line">GROUP BY  分组的列表</span><br><span class="line">[ORDER BY 字句]</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">		查询列表必须特殊，要求是分组函数和group by后出现的字段	</span><br><span class="line">		where一定放在from后面</span><br><span class="line">		</span><br><span class="line">特点：1.分组查询中的筛选条件分为两类</span><br><span class="line">	|	 			|数据源				|位置					|关键字|</span><br><span class="line">	|---------------|----------------------|-------------------|------|</span><br><span class="line">	|分组前筛选       |原始表			 |group by子句前		    | where|</span><br><span class="line">    |分组后筛选		 |分组后的结果集	  |group by子句后		     | having|</span><br><span class="line">				</span><br><span class="line">				分组函数（max min sum avg count）做条件肯定是放在having子句中</span><br><span class="line">				能用分组前筛选的，优先考虑分组前筛选</span><br><span class="line">				</span><br><span class="line">			2.group by子句支持表达式，单个字段，多个字段（用逗号隔开）</span><br><span class="line">			3.也可以添加排序，在整个分组查询的最后</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">#简单的分组查询</span><br><span class="line"># case 1:查询每个工种的最高工资</span><br><span class="line">SELECT MAX(salary),job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br><span class="line"></span><br><span class="line"># case 2：查询每个位置上的部门个数</span><br><span class="line">SELECT COUNT(DISTINCT department_id),location_id</span><br><span class="line">FROM departments</span><br><span class="line">GROUP BY location_id;</span><br><span class="line"></span><br><span class="line">#推加筛选条件</span><br><span class="line"># case 1：邮箱中包含a字符的，每个部门的平均工资</span><br><span class="line">SELECT AVG(salary),department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE email LIKE &#39;%a%&#39;</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"></span><br><span class="line"># case 2:查询每个领导手下有奖金的员工的最高工资</span><br><span class="line">SELECT MAX(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct is not null</span><br><span class="line">GROUP BY manager_id;</span><br><span class="line"></span><br><span class="line">#添加复杂的筛选条件</span><br><span class="line">#案例1：查询哪个部门的员工个数&gt;2</span><br><span class="line">#a.查询每个部门的员工数</span><br><span class="line">SELECT COUNT(*), department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line">#b.根据前面的结果进行筛选</span><br><span class="line">SELECT COUNT(*), department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING COUNT(*)&gt;2;      #分号视作语句的结束，在最后面用</span><br><span class="line"></span><br><span class="line">#case 2:查询每个工种有奖金的员工最高工资&gt;12000的工种编号和最高工资</span><br><span class="line">SELECT MAX(salary),job_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE commission_pct is not NULL</span><br><span class="line">GROUP BY job_id</span><br><span class="line">HAVING MAX(salary)&gt;12000;</span><br><span class="line"></span><br><span class="line">#case 3:查询领导编号&gt;102的每个领导手下的最低工资&gt;5000的领导编号及最低工资</span><br><span class="line">SELECT MIN(salary), manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE manager_id&gt;102</span><br><span class="line">GROUP BY manager_id </span><br><span class="line">HAVING MIN(salary)&gt;5000;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#按表达式或函数分组</span><br><span class="line"># case：按员工姓名的长度分组，查询每一组的员工个数，筛选员工数&gt;5的</span><br><span class="line">SELECT COUNT(*),LENGTH(last_name)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY LENGTH(last_name)</span><br><span class="line">HAVING COUNT(*)&gt;5;</span><br><span class="line"></span><br><span class="line">#按多个字段分组</span><br><span class="line">#case：查询每个部门每个工种的平均工资</span><br><span class="line">SELECT AVG(salary),department_id,job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id,job_id; #可以调换顺序</span><br><span class="line"></span><br><span class="line">#添加排序</span><br><span class="line">#case：查询每个部门每个工种的平均工资，并且按照平均工资高低显示</span><br><span class="line">SELECT AVG(salary),department_id,job_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id is NOT NULL</span><br><span class="line">GROUP BY department_id,job_id</span><br><span class="line">HAVING AVG(salary)&gt;10000     #having和group by支持别名</span><br><span class="line">ORDER BY AVG(salary) DESC;</span><br><span class="line"></span><br><span class="line">#1.查询个job_id员工工资的最大值、最小值、平均值、和，按job_id升序</span><br><span class="line">SELECT MAX(salary),MIN(salary),AVG(salary),SUM(salary),job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id</span><br><span class="line">ORDER BY job_id;</span><br><span class="line"></span><br><span class="line">#2.最高最低工资的差距</span><br><span class="line">SELECT MAX(salary)-MIN(salary)</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#3.查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计入</span><br><span class="line">SELECT MIN(salary),manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE manager_id is not null</span><br><span class="line">GROUP BY manager_id</span><br><span class="line">HAVING MIN(salary)&gt;&#x3D;6000;</span><br><span class="line"></span><br><span class="line">#4.查询所有部门的编号，员工数量和工资平均值，按平均工资降序</span><br><span class="line">SELECT department_id,COUNT(*) quantity,ROUND(AVG(salary),2) avgsal</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">ORDER BY AVG(salary) DESC;</span><br><span class="line"></span><br><span class="line">#5.选择具有各个job_id的员工人数</span><br><span class="line">SELECT COUNT(*),job_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br></pre></td></tr></table></figure>

<h2 id="进阶6：连接查询"><a href="#进阶6：连接查询" class="headerlink" title="进阶6：连接查询"></a>进阶6：连接查询</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">含义：多表查询，当查询的字段来自于多个表时使用</span><br><span class="line">笛卡尔乘积现象：表1 m行，表2 n行，结果m*n行</span><br><span class="line"></span><br><span class="line">原因：没有有效的连接条件</span><br><span class="line">避免：添加有效的连接条件</span><br><span class="line"></span><br><span class="line">分类：</span><br><span class="line">			1.按年代分类：</span><br><span class="line">			sql92标准：在mysql中仅仅支持内连接，在oracle等中支持部分外连接</span><br><span class="line">			sql99标准（推荐）：支持内连接+外连接（左、右）+交叉连接</span><br><span class="line">			</span><br><span class="line">			2.按功能分类：</span><br><span class="line">			内连接：</span><br><span class="line">							等值连接</span><br><span class="line">							非等值连接</span><br><span class="line">							自连接</span><br><span class="line">			外连接：</span><br><span class="line">							左外连接</span><br><span class="line">							右外连接</span><br><span class="line">							全外连接</span><br><span class="line">			交叉连接</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line">USE myemployees;</span><br><span class="line"></span><br><span class="line">SELECT * FROM beauty;</span><br><span class="line">SELECT * FROM boys;</span><br><span class="line"></span><br><span class="line">SELECT name, boyName FROM beauty ,boys; </span><br><span class="line"></span><br><span class="line">SELECT name, boyName FROM beauty ,boys</span><br><span class="line">WHERE beauty.boyfriend_id&#x3D;boys.id;</span><br><span class="line"></span><br><span class="line">#一、sql92标准</span><br><span class="line"></span><br><span class="line">#1.等值连接</span><br><span class="line">&#x2F;*</span><br><span class="line">a.多表等值连接为交集部分</span><br><span class="line">b.n表连接，至少要n-1个连接条件</span><br><span class="line">c.顺序无要求</span><br><span class="line">d.一般要起别名</span><br><span class="line">e.可以搭配排序、分组、筛选</span><br><span class="line">*&#x2F;</span><br><span class="line">#case 1</span><br><span class="line">SELECT name, boyName FROM beauty ,boys</span><br><span class="line">WHERE beauty.boyfriend_id&#x3D;boys.id;</span><br><span class="line"></span><br><span class="line">#case 2:查询员工名和对应的部门名</span><br><span class="line">SELECT last_name,department_name </span><br><span class="line">FROM employees,departments</span><br><span class="line">WHERE employees.department_id&#x3D;departments.department_id;</span><br><span class="line"></span><br><span class="line">#2.为表起别名</span><br><span class="line">#case 查询员工名、工种号、工种名</span><br><span class="line">SELECT last_name,e.job_id,job_title #不知道job_id的来源。需要用表名限定</span><br><span class="line">FROM employees e,jobs j</span><br><span class="line">WHERE e.job_id&#x3D;j.job_id;   #如果起别名就全部要用，统一</span><br><span class="line"></span><br><span class="line">#3.两个表的顺序可以调换</span><br><span class="line">SELECT last_name,e.job_id,job_title #用一个表一行行去对另一个表</span><br><span class="line">FROM jobs j，employees e</span><br><span class="line">WHERE e.job_id&#x3D;j.job_id</span><br><span class="line"></span><br><span class="line">#4.加筛选</span><br><span class="line"># case 1 :查询有奖金的员工名、部门名</span><br><span class="line">SELECT last_name,department_name</span><br><span class="line">FROM employees e, departments d</span><br><span class="line">WHERE e.department_id&#x3D;d.department_id</span><br><span class="line">AND e.commission_pct is not null;</span><br><span class="line"></span><br><span class="line"># case 2:查询城市名中第二个字符为o的部门名和城市名</span><br><span class="line">SELECT city,department_name</span><br><span class="line">FROM departments d, locations l</span><br><span class="line">WHERE d.location_id&#x3D;l.location_id</span><br><span class="line">AND city LIKE &#39;_o%&#39;;</span><br><span class="line"></span><br><span class="line">#5.加分组</span><br><span class="line">#case 1：查询每个城市的部门个数</span><br><span class="line">SELECT COUNT(*) amount ,city</span><br><span class="line">FROM departments d, locations l</span><br><span class="line">WHERE d.location_id&#x3D;l.location_id</span><br><span class="line">GROUP BY city;</span><br><span class="line"></span><br><span class="line">#case 2:查询有奖金的每个部门的部门名和部门领导编号和该部门的最低工资</span><br><span class="line">SELECT d.department_name, d.manager_id,min(salary)</span><br><span class="line">FROM departments d,employees e</span><br><span class="line">WHERE d.department_id&#x3D;e.department_id</span><br><span class="line">AND commission_pct is NOT NULL</span><br><span class="line">GROUP BY e.department_id,d.manager_id;</span><br><span class="line"></span><br><span class="line">#6.加排序</span><br><span class="line">#案例：查询每个工种的工种名和员工的个数，按员工个数降序</span><br><span class="line">SELECT job_title, COUNT(*)</span><br><span class="line">FROM jobs j,employees e</span><br><span class="line">WHERE j.job_id&#x3D;e.job_id</span><br><span class="line">GROUP BY job_title</span><br><span class="line">ORDER BY COUNT(*) DESC;</span><br><span class="line"></span><br><span class="line">#7.三表连接</span><br><span class="line">#case 1： 查询员工名、部门名、所在的城市</span><br><span class="line"></span><br><span class="line">SELECT last_name,department_name,city</span><br><span class="line">FROM employees e, departments d, locations l</span><br><span class="line">WHERE e.department_id&#x3D;d.department_id</span><br><span class="line">AND d.location_id&#x3D;l.location_id;</span><br><span class="line"></span><br><span class="line">#2.非等值连接</span><br><span class="line">#case 1：查询员工的工资和工资级别</span><br><span class="line">SELECT salary,grade_level</span><br><span class="line">FROM employees e, job_grades g</span><br><span class="line">WHERE salary BETWEEN lowest_sal and highest_sal</span><br><span class="line">AND grade_level&#x3D;&#39;A&#39;;</span><br><span class="line"></span><br><span class="line">#3.自连接</span><br><span class="line">#case：查询员工名和上级的名称</span><br><span class="line">SELECT e.last_name,e.employee_id,m.last_name</span><br><span class="line">FROM employees e,employees m </span><br><span class="line">WHERE m.employee_id&#x3D;e.manager_id;</span><br><span class="line"></span><br><span class="line">#显示员工表的最大工资，工资平均值</span><br><span class="line">SELECT MAX(salary),AVG(salary)</span><br><span class="line">FROM employees;</span><br><span class="line"></span><br><span class="line">#查询 员工表的job_id中包含a和e，a在前</span><br><span class="line">SELECT job_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id like &#39;%a%e%&#39;</span><br><span class="line"></span><br><span class="line">#Exercise</span><br><span class="line"></span><br><span class="line">#1. 显示所有员工的姓名，部门号和部门名称。 </span><br><span class="line">SELECT last_name,e.department_id,department_name</span><br><span class="line">FROM employees e,departments d</span><br><span class="line">WHERE e.department_id&#x3D;d.department_id;</span><br><span class="line"></span><br><span class="line">#2. 查询 90 号部门员工的 job_id 和 90 号部门的 location_id </span><br><span class="line">SELECT job_id,location_id,department_id</span><br><span class="line">FROM employees e, locations l</span><br><span class="line">WHERE department_id&#x3D;90 ;  #不用连接条件会产生笛卡尔乘积问题</span><br><span class="line">*-----------------------</span><br><span class="line">SELECT job_id,location_id,e.department_id</span><br><span class="line">FROM employees e, departments d</span><br><span class="line">WHERE e.department_id&#x3D;90 </span><br><span class="line">AND e.department_id&#x3D;d.department_id;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3. 选择所有有奖金的员工的 last_name , department_name , location_id , city </span><br><span class="line">SELECT last_name,department_name,l.location_id,city</span><br><span class="line">FROM employees e,departments d,locations l</span><br><span class="line">WHERE commission_pct is not null</span><br><span class="line">AND e.department_id&#x3D;d.department_id</span><br><span class="line">AND d.location_id&#x3D;l.location_id;</span><br><span class="line"></span><br><span class="line">#4. 选择city在Toronto工作的员工的 last_name , job_id , department_id , department_name</span><br><span class="line">SELECT last_name,job_id,e.department_id,department_name,city</span><br><span class="line">FROM employees e,departments d,locations l</span><br><span class="line">WHERE city&#x3D;&#39;Toronto&#39;</span><br><span class="line">AND e.department_id&#x3D;d.department_id</span><br><span class="line">AND d.location_id&#x3D;l.location_id;   #三表连接，要写两个条件</span><br><span class="line"> </span><br><span class="line">#5.查询每个工种、每个部门的部门名、工种名和最低工资 </span><br><span class="line">SELECT j.job_id,department_name,job_title,MIN(salary)</span><br><span class="line">FROM jobs j, departments d,employees e</span><br><span class="line">WHERE j.job_id&#x3D;e.job_id</span><br><span class="line">AND e.department_id&#x3D;d.department_id</span><br><span class="line">GROUP BY job_id;</span><br><span class="line"></span><br><span class="line">#6.查询每个国家下的部门个数大于 2 的国家编号 </span><br><span class="line">SELECT country_id, department_id,count(*)</span><br><span class="line">FROM locations l,departments d</span><br><span class="line">WHERE l.location_id&#x3D;d.location_id</span><br><span class="line">GROUP BY country_id</span><br><span class="line">HAVING count(*)&gt;2;</span><br><span class="line">#7.择指定员工的姓名，员工号，以及他的管理者的姓名和员工号，结果类似于下面的格 式 </span><br><span class="line">&#x2F;*</span><br><span class="line">employees Emp# manager Mgr# </span><br><span class="line">kochhar   101  king    100 </span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT e.last_name employees,e.employee_id &#39;Emp#&#39;,m.last_name manager,m.employee_id &#39;Mgr#&#39;</span><br><span class="line">FROM employees e, employees m</span><br><span class="line">WHERE e.manager_id&#x3D;m.employee_id</span><br><span class="line">AND e.employee_id&#x3D;101;</span><br></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/paranoiddemon.github.io/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="https://paranoiddemon.github.io/blog/posts/mysql-select.html" data-id="ckbp2fhv2000bf0us2o6r2vcz" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACMklEQVR42u3aS27DMAxF0ex/0+60QCHnPlIuIPpqFDiOo+MBIX4+H7yuX2t15f7O1T3kmduWDBkyjmVct4vf03/yX3bwvzJkyHgBY7UJcg/ZFgmjJFgvr8uQIUMGDohpGJUhQ4aM5wIuR96HVxkyZMjgDJJqdg52aZL8YC4uQ4aMAxm86v7/nx/pb8iQIeMoxhUunsR2ynbxrmTIkDGa0Tn2ddLR9GloPzJkyBjK4K3HNL1MBzJIw2B5RYYMGaMZ/Mf3IZUX6fhrSpsTMmTIeAOjFgRrbQB+HGx1YmXIkDGIkTYDOJgnsejwhwt8MmTImMSojTvUhsZqqSka+5AhQ8ZoRi0dJaGQf8uboEEuLkOGjEGM/ogDL5ntTWVbMyMyZMg4itEZceCtgl0FOPRbGTJkDGXwEQo+NIbSzlJRr5iRy5Ah41gGb0/2N5G2QoPynAwZMkYz0oCbBuI0+LaWDBkyhjL6ZfpdLQQe9IO5NhkyZIxg3P9xJ6TywFpLj1EuLkOGjHGMNPztCqxpmW/5NBkyZLyAUTsg8pDKX0FxUEyGDBkvYKQDEDyYpqkvfx2fVC9DhowDGZ2h1c6RjhTUgjAtQ4aM0Yy0SxiU6bcW7/pFPRkyZJzOqAVZnqCSlLV2VI0rdjJkyDic0Zle6LQWtrU8ZciQIaOxLX58DGqEMmTIkLFpnIKU4fgr+xKmZciQ8QIGSWI7bQO+xVp6LEOGjNmM2rkrHdvim9h16JQhQ8YIxg/mYSLgiIC69AAAAABJRU5ErkJggg==">分享</a><div class="tags"></div><div class="post-nav"><a class="pre" href="/paranoiddemon.github.io/posts/hk-election.html">香港选举制度</a><a class="next" href="/paranoiddemon.github.io/posts/speedy-revovery.html">Wish You A Speedy Recovery</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == 'true' ? true : false;
var verify = 'false' == 'true' ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'F4fuINw4fDM77aFwYEmAzsW3-gzGzoHsz',
  appKey:'mMUlvMhTRvKI3Akc8WuVc2EU',
  placeholder:'你来讲两句',
  avatar:'mp',
  guest_info:guest_info,
  pageSize:'10'
})
</script></div></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/paranoiddemon.github.io/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/paranoiddemon.github.io/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/paranoiddemon.github.io/css/search.css?v=0.0.0"><script type="text/javascript" src="/paranoiddemon.github.io/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/paranoiddemon.github.io/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/paranoiddemon.github.io/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/paranoiddemon.github.io/js/smartresize.js?v=0.0.0"></script></div></body></html>